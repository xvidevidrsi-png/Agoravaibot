.PHONY: help install run dev prod test clean lint format deps deploy logs

help:
	@echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
	@echo "  ü§ñ Bot Zeus - Comandos Dispon√≠veis"
	@echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
	@echo ""
	@echo "  üì¶ DEPEND√äNCIAS"
	@echo "    make install   - Instala depend√™ncias do requirements.txt"
	@echo "    make deps      - Atualiza depend√™ncias"
	@echo ""
	@echo "  üöÄ EXECUTAR"
	@echo "    make dev       - Roda bot em desenvolvimento (com reload)"
	@echo "    make run       - Roda bot em produ√ß√£o"
	@echo "    make prod      - Alias para make run"
	@echo ""
	@echo "  üîß DESENVOLVIMENTO"
	@echo "    make lint      - Verifica c√≥digo com pylint"
	@echo "    make format    - Formata c√≥digo com black"
	@echo "    make test      - Executa testes"
	@echo "    make clean     - Remove arquivos tempor√°rios"
	@echo ""
	@echo "  üåê DEPLOYMENT"
	@echo "    make deploy    - Prepara para deploy no Render"
	@echo "    make logs      - Mostra logs de desenvolvimento"
	@echo ""
	@echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

install:
	@echo "üì¶ Instalando depend√™ncias..."
	pip install -r requirements.txt
	@echo "‚úÖ Depend√™ncias instaladas!"

deps:
	@echo "üîÑ Atualizando depend√™ncias..."
	pip install --upgrade -r requirements.txt
	@echo "‚úÖ Depend√™ncias atualizadas!"

run: install
	@echo "üöÄ Iniciando Bot Zeus (Produ√ß√£o)..."
	python main.py

dev: install
	@echo "üîÑ Iniciando Bot Zeus (Desenvolvimento)..."
	@echo "‚ö†Ô∏è  Com auto-reload (use Ctrl+C para parar)"
	watchmedo auto-restart -d . -p '*.py' -- python main.py

prod: run

test:
	@echo "üß™ Executando testes..."
	python -m pytest tests/ -v
	@echo "‚úÖ Testes conclu√≠dos!"

lint:
	@echo "üîç Verificando c√≥digo..."
	python -m pylint main.py
	@echo "‚úÖ Verifica√ß√£o conclu√≠da!"

format:
	@echo "‚ú® Formatando c√≥digo..."
	python -m black main.py
	python -m isort main.py
	@echo "‚úÖ C√≥digo formatado!"

clean:
	@echo "üßπ Limpando arquivos tempor√°rios..."
	find . -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name "*.pyc" -delete
	find . -type f -name "*.pyo" -delete
	find . -type f -name "*.egg-info" -delete
	rm -rf .pytest_cache .mypy_cache dist build
	@echo "‚úÖ Limpeza conclu√≠da!"

deploy: clean
	@echo "üöÄ Preparando para Deploy no Render..."
	@echo "  ‚úÖ requirements.txt - OK"
	@echo "  ‚úÖ Procfile - OK"
	@echo "  ‚úÖ main.py - OK"
	@echo ""
	@echo "üìù Pr√≥ximos passos:"
	@echo "  1. git add ."
	@echo "  2. git commit -m 'deploy: update bot'"
	@echo "  3. git push origin main"
	@echo ""
	@echo "  Render far√° o deploy automaticamente!"

logs:
	@echo "üìä Seguindo logs do bot..."
	tail -f bot_zeus.log 2>/dev/null || echo "‚ùå Arquivo de log n√£o encontrado"

.DEFAULT_GOAL := help
